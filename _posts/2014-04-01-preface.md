---
layout: post
unique_identifier:
 - 'http:/example.jp/bookid_in_url'
 - 'BookID'
 - 'URL'
title: 'はじめに'
creator: '五十嵐邦明'
date: '2014-04-01'
categories:
---

# はじめに

> *Rubyは開発者を幸せにする言語。*

> *もっと多くの開発者を Ruby で幸せにしたい。*

> *- matz*


ブラウザを使って買い物をする、SNSを読み書きする、料理のレシピを検索する。インターネット上のWebアプリは私たちの生活に深く根ざしています。それらを使うだけではなくて、どうやって動いているか知りたい、自分でも作ってみたい。本書はそんな想いを叶えるための第一歩を踏み出すための資料です。

## 本書の目的

本書の目的の1つはWebアプリ作成のための便利なフレームワークRuby on Rails（以下、Railsと略します）を使い、写真や文書を投稿できるミニブログアプリを題材として実際に作って動かし、その仕組みを学ぶことです。Webアプリケーションがどういうものなのか、何ができるのか、どのような仕組みで動いているのかを説明していきます。できるだけ簡単なサンプルアプリを用意し、その仕組みを説明することで、RailsおよびWebアプリの基礎を説明していきます。

また、本書の目的のもう1つは、世の中にあるたくさんの情報を読むために前提となる基礎知識を身につけることです。Railsを学ぶための良い資料として、[RailsGuides](http://railsguides.jp/) や [RailsTutorial](http://railstutorial.jp/) があります。本書を読み進めると、これらの資料を読み進めるための基礎知識が身についてきます。実践的なRailsアプリを作るために必要なさまざまな資料を読むための入り口として本書はあります。

## 本書の対象読者

本書が対象としている読者は以下のような方々です。

- プログラミングは初めてである
- Webプログラミングは初めてである
- Railsプログラミングは初めてである
- Railsプログラミングを講義で教えたい

プログラミングは初めての方も安心してください。プログラミングの世界へようこそ！本書は筆者が作成した一橋大学社会学部での半期分の講義資料をもとに書いています。講義では初めてプログラムを書く学生さんが多数派でした。学生さんたちがつまづいた箇所について補足をして、資料を加筆していきました。プログラミングが初めての方に読んでいただけるように、丁寧に説明をしていきます。

プログラミングの世界、Webの世界は広大です。本書ではHTML（ブラウザで表示するための言語）とCSS（HTMLと一緒に使う、装飾するための言語）については最低限の説明のみにとどめています。HTMLとCSSについて学びたい方は、たとえば以下の情報が分かり易いです。

- [ドットインストール　HTML入門](http://dotinstall.com/lessons/basic_html_v3)
- [ドットインストール　CSS入門](http://dotinstall.com/lessons/basic_css_v3)

もしもあなたがデザイナーであり、HTMLコーディングはおてのもの、という場合は大きなアドバンテージがあります。本書の知識と組み合わせることで鮮やかなWebアプリを作ることができるようになるでしょう。

また、プログラミングが初めての方で本書を読んで「動くことは分かったけど、そもそもプログラムって何？」「プログラムを書くときに、どうやって考えればいいんだろう？」「プログラムを読んで理解はできるが、自分で考えて書くことができない」と感じた方は、以下の本が参考になるのではと思います。プログラミングとは何か、プログラマはどうやって思考するのかといった話題について、分かり易い例をたくさん出して説明しています。

- 教養としてのプログラミング講座
    - 中公新書ラクレ
    - 著: 清水　亮
    - ISBN: 978-4-12-150489-0

もしもあなたが他の言語でプログラミングをした経験があれば、これも大きなアドバンテージです。特にJavaScript（ブラウザ上で広く使われているプログラミング言語）の経験がある方は、本書の知識をつかってインタラクティブで格好良いWebアプリを作ることができるようになるでしょう（本書ではJavaScriptについては説明しません）。Rubyの経験がある方は、本書の内容を越えた範囲について、いままでの知識をつかって早く成長することができるでしょう。

Railsプログラミングを講義で教えたい方へ。本書はwebアプリがどういうものなのかを実際に手を動かしながら学ぶ構成になっています。実際の講義資料を元に書いており、講義はプログラミングが初めての学生さんらに向けて1回90分の講義約10回で行いました。その後、3回の講義時間を使って自由にwebアプリを作る実習を行ったところ、彼ら彼女らは自分で考えた実用的であったり、たのしさにあふれたりする、独創性のあるプログラムを作りあげて発表してくれました。本書はできるだけ易しく説明を進めますが、Rubyのことやshellのこと、プログラミングでしか使わない記号など、つまづいた際にはサポートの手を差し伸べられる環境を作っておくと順調に前へ進めるようになります。

一方で、本書の対象から外れるのは以下のような方です。

- Railsの基礎はわかっている

本書はRailsの入門的な本やサイトを読んで難しいと感じた方に、そこまでの知識を埋められるように書いています。逆に言えば、他の入門書を読める力があれば、本書は易しすぎると感じるかもしれません。具体的には、[RailsTutorial](http://railstutorial.jp/) を読み進められるようであれば、本書から得られるものは少ないかもしれません。

## 書式例

本書では以下のようにコードやターミナルコマンドを表現します。

### rubyおよびrailsコードの書式例

```ruby
puts "Hello world!"
```
### 差分がある場合の書式例

```diff
class HelloController < ApplicationController
  def index
-   @time = Time.current
+   @time = 1.day.ago
  end
end
```

-, +印が付いている場合はその行について変更を行うことを示します（-, + がついていない部分はそのままです）。-で始まる行を削除し、+で始まる行を追加してください。

### ターミナルコマンドの書式例

```bash
$ rails s
```

先頭の$マークはターミナルを表す印です。入力する必要はありません。

### ターミナルの実行結果の書式例

```console
=> Booting Puma
=> Rails 5.1.2 application starting in development on http://localhost:3000
=> Run `rails server -h` for more startup options
Puma starting in single mode...
* Version 3.8.2 (ruby 2.4.1-p111), codename: Sassy Salamander
* Min threads: 5, max threads: 5
* Environment: development
* Listening on tcp://0.0.0.0:3000
Use Ctrl-C to stop
```

## サンプルコード

本書で使うサンプルコードは以下に置いてあります。

[`https://github.com/igaiga/rails_textbook_sample`](https://github.com/igaiga/rails_textbook_sample)

## 開発環境

本書はRuby 2.4.1、Rails 5.1.2で動作確認をしています。2017年7月1日現在、Rubyの最新バージョンは2.4.1、Railsの最新バージョンは5.1.2です。

本書の内容を実行する場合にはRubyおよびRailsの開発環境を作る必要があります。MacとWindowsの場合それぞれでの環境構築方法を説明して、そのあとでどちらの環境でも共通であるRubyとRailsのインストール方法を説明します。

- ローカルに開発環境を作る - Macの場合
- ローカルに開発環境を作る - Windowsの場合
- RubyとRailsをインストールする

ブラウザはお好きなものをご利用いただけますが、途中のデバッグの箇所で [Chrome](https://www.google.co.jp/chrome/browser/) の機能を例にして説明していますので、Chromeを使うと分かり易いです。

プログラムを入力する道具であるエディタは、好みのものがあればそれを利用してください。特にない場合は [Visual Studio Code](https://code.visualstudio.com/) をお勧めします。Visual Studio Codeは無料で利用することができます（ライセンスはMITライセンスです）。

もしもここに書いている内容でうまくいかない場合は、 [RailsGirlsガイド インストール・レシピ](http://railsgirls.jp/install) のページがRails環境構築情報が最新に保たれているので、こちらも参考にしてみてください。

### ローカルに開発環境を作る - Macの場合

自分のMac上に開発環境を作る方法です。

開発環境づくりに必要なxcodeツールをインストールします。

```console
$ xcode-select --install
```

[Homebrew](https://brew.sh/) をインストールします。HomebrewはMacでさまざまな便利なものをインストール、管理するためのツールです。

```console
$ /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
```

Homebrewを使ってrbenvをインストールします。rbenvはRubyをインストールして管理するための道具です。

```console
$ brew update
$ brew install rbenv
$ echo 'export PATH="$HOME/.rbenv/shims:$PATH"' >> ~/.bash_profile
$ echo 'eval "$(rbenv init -)"' >> ~/.bash_profile
$ source ~/.bash_profile
```

これでRubyとRailsをインストールするための準備ができました。つづいて「RubyとRailsをインストールする」へ進んでください。

### ローカルに開発環境を作る - Windowsの場合

Windowsの場合はWindows Subsystem for Linux(WSL)とrbenvを利用することで環境を構築することができます。インストールしたLinux上で、rbenvやaptなどLinux/UNIX向けツールを利用することでRailsの開発環境を構築できます。WSLを利用するためにはOSのバージョンがWindows10以降が必要です。

WSLをインストールする方法は [Windows Subsystem for Linux Installation Guide for Windows 10 のページ](https://docs.microsoft.com/en-us/windows/wsl/install-win10) に書かれていますので、こちらを参照してください。また、 [RailsGirlsガイド インストール・レシピ](http://railsgirls.jp/install) のページにも同様の手順の解説が日本語で書いてあります。

インストールするLinuxを選ぶところでは好きなものを選んでもらって構いませんが、特になければUbuntuを選択することをお勧めします。

WSLのインストール後、起動したアプリケーション（Bashウィンドウと呼びます）にはユーザー名とパスワードの入力を促す画面が表示されていますので、適当なユーザー名（半角英数小文字のみ）とパスワードを入力しましょう（パスワードは2回入力する必要があり、画面には表示されませんが正しく入力されています）。

Bashウィンドウで以下のコマンドを実行してください。なお、最初のコマンドを実行する際にパスワードの入力を求められますが、先程Bashウィンドウに入力したパスワードを入力してください(Windowsのパスワードではないので注意してください)。

```console
$ sudo apt update
$ sudo apt upgrade -y
$ sudo apt install autoconf bison build-essential libssl-dev libyaml-dev libreadline-dev zlib1g-dev libncurses5-dev libffi-dev libgdbm-dev sqlite3 libsqlite3-dev nodejs -y
```

つづいてrbenvをインストールします。rbenvはRubyをインストールして管理するための道具です。以下のコマンドを実行してください。

```console
$ git clone https://github.com/rbenv/rbenv.git ~/.rbenv
$ git clone https://github.com/rbenv/ruby-build.git "$(rbenv root)"/plugins/ruby-build
$ echo 'export PATH="$HOME/.rbenv/bin:$PATH"' >> ~/.bashrc
$ echo 'eval "$(rbenv init -)"' >> ~/.bashrc
$ source ~/.bashrc
```

これでRubyとRailsをインストールするための準備ができました。つづいて「RubyとRailsをインストールする」へ進んでください。

### RubyとRailsをインストールする

rbenvを使ってRubyをインストールします。

```console
$ rbenv install 2.4.1
```

installしたRubyを利用するように設定します。

```console
$ rbenv global 2.4.1
```

以上でRubyのインストールは完了です。続いて、インストールしたRubyを使ってRailsをインストールします。

```console
$ gem i rails
```

確認のため、`rails -v`コマンドを実行してみましょう。

```console
$ rails -v
Rails 5.1.2
```

このようにインストールしたrailsのバージョンが表示されればインストール成功です。結果に表示されるバージョンの数字は、実行時の最新バージョンとなるため異なることがあります。

ここまででRubyとRailsの開発環境構築ができました。
