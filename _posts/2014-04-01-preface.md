---
layout: post
unique_identifier:
 - 'http:/example.jp/bookid_in_url'
 - 'BookID'
 - 'URL'
title: 'はじめに'
creator: '五十嵐邦明'
date: '2014-04-01'
categories:
---

# はじめに

> *Rubyは開発者を幸せにする言語。*

> *もっと多くの開発者を Ruby で幸せにしたい。*

> *- matz*


ブラウザを使って買い物をする、SNSを読み書きする、料理のレシピを検索する。インターネット上のWebアプリは私たちの生活に深く根ざしています。それらを使うだけではなくて、どうやって動いているか知りたい、自分でも作ってみたい。本書はそんな想いを叶えるための第一歩を踏み出すための資料です。

## 本書の目的

本書の目的の1つはWebアプリ作成のための便利なフレームワークRuby on Rails（以下、Railsと略します）を使い、写真や文書を投稿できるミニブログアプリを題材として実際に作って動かし、その仕組みを学ぶことです。Webアプリケーションがどういうものなのか、何ができるのか、どのような仕組みで動いているのかを説明していきます。できるだけ簡単なサンプルアプリを用意し、その仕組みを説明することで、RailsおよびWebアプリの基礎を説明していきます。

また、本書の目的のもう1つは、世の中にあるたくさんの情報を読むために前提となる基礎知識を身につけることです。Railsを学ぶための良い資料として、[RailsGuides](http://railsguides.jp/) や [RailsTutorial](http://railstutorial.jp/) があります。本書を読み進めると、これらの資料を読み進めるための基礎知識が身についてきます。実践的なRailsアプリを作るために必要なさまざまな資料を読むための入り口として本書はあります。

## 本書の対象読者

本書が対象としている読者は以下のような方々です。

- プログラミングは初めてである
- Webプログラミングは初めてである
- Railsプログラミングは初めてである
- Railsプログラミングを講義で教えたい

プログラミングは初めての方も安心してください。プログラミングの世界へようこそ！本書は筆者が作成した2年間の一橋大学社会学部での講義資料をもとに書いています。講義では初めてプログラムを書く学生さんが多数派でした。学生さんたちがつまづいた箇所について補足をして、資料を加筆していきました。プログラミングが初めての方に読んでいただけるように、丁寧に説明をしていきます。

プログラミングの世界、Webの世界は広大です。本書ではHTML（ブラウザで表示するための言語）とCSS（HTMLと一緒に使う、装飾するための言語）については最低限の説明のみにとどめています。HTMLとCSSについて学びたい方は、たとえば以下の情報が分かり易いです。

- [ドットインストール　HTML入門](http://dotinstall.com/lessons/basic_html_v3)
- [ドットインストール　CSS入門](http://dotinstall.com/lessons/basic_css_v3)

もしもあなたがデザイナーであり、HTMLコーディングはおてのもの、という場合は大きなアドバンテージがあります。本書の知識と組み合わせることで鮮やかなWebアプリを作ることができるようになるでしょう。

また、プログラミングが初めての方で本書を読んで「動くことは分かったけど、そもそもプログラムって何？」「プログラムを書くときに、どうやって考えればいいんだろう？」「プログラムを読んで理解はできるが、自分で考えて書くことができない」と感じた方は、以下の本が参考になるのではと思います。プログラミングとは何か、プログラマはどうやって思考するのかといった話題について、分かり易い例をたくさん出して説明しています。

- 教養としてのプログラミング講座
    - 中公新書ラクレ
    - 著: 清水　亮
    - ISBN: 978-4-12-150489-0

もしもあなたが他の言語でプログラミングをした経験があれば、これも大きなアドバンテージです。特にJavaScript（ブラウザ上で広く使われているプログラミング言語）の経験がある方は、本書の知識をつかってインタラクティブで格好良いWebアプリを作ることができるようになるでしょう（本書ではJavaScriptについては説明しません）。Rubyの経験がある方は、本書の内容を越えた範囲について、いままでの知識をつかって早く成長することができるでしょう。

Railsプログラミングを講義で教えたい方へ。本書はwebアプリがどういうものなのかを実際に手を動かしながら学ぶ構成になっています。実際の講義資料を元に書いており、講義はプログラミングが初めての学生さんらに向けて1回90分の講義約10回で行いました。その後、3回の講義時間を使って自由にwebアプリを作る実習を行ったところ、彼ら彼女らは自分で考えた実用的であったり、たのしさにあふれたりする、独創性のあるプログラムを作りあげて発表してくれました。本書はできるだけ易しく説明を進めますが、Rubyのことやshellのこと、プログラミングでしか使わない記号など、つまづいた際にはサポートの手を差し伸べられる環境を作っておくと順調に前に進めるようになります。

本書の対象から外れるのは以下のような方です。

- Railsの基礎はわかっている

本書はRailsの入門的な本やサイトを読んで難しいと感じた方に、そこまでの知識を埋められるように書いています。逆に言えば、他の入門書を読める力があれば、本書は易しすぎると感じるかもしれません。具体的には、[RailsTutorial](http://railstutorial.jp/) を読み進められるようであれば、本書から得られるものは少ないかもしれません。

## 書式例

本書では以下のようにコードやターミナルコマンドを表現します。

### rubyおよびrailsコードの書式例

```ruby
puts "Hello world!"
```
### 差分がある場合の書式例

```diff
class HelloController < ApplicationController
  def index
-   @time = Time.now
+   @time = 1.day.ago
  end
end
```

-, +印が付いている場合はその行について変更を行うことを示します（-, + がついていない部分はそのままです）。-で始まる行を削除し、+で始まる行を追加してください。

### ターミナルコマンドの書式例

```bash
$ rails s
```

先頭の$マークはターミナルを表す印です。入力する必要はありません。

### ターミナルの実行結果の書式例

```console
=> Booting Puma
=> Rails 5.0.0 application starting in development on http://localhost:3000
=> Run `rails server -h` for more startup options
Puma starting in single mode...
* Version 3.4.0 (ruby 2.3.1-p112), codename: Owl Bowl Brawl
* Min threads: 5, max threads: 5
* Environment: development
* Listening on tcp://localhost:3000
Use Ctrl-C to stop
```

## サンプルコード

本書で使うサンプルコードは以下に置いてあります。

[`https://github.com/igaiga/rails_textbook_sample`](https://github.com/igaiga/rails_textbook_sample)

## 開発環境

本書はRuby 2.3.1と、Rails 5.0.0およびRails4.2.4で動作確認をしています。[^1]

[^1]: 2016年7月2日現在、Railsの最新バージョンは5.0.0です。本書の内容はRails 4.2でも同様に実行できますので、Rails 4.2をお使いいただいても大丈夫です。Rails4.2でRails5.0と異なる部分については、その都度補足していきます。

本書の内容を実行する場合にはRubyおよびRailsの開発環境を作る必要があります。開発環境として、3つの方法を書きました。どれか1つを選んで環境を作ってみましょう。簡単に開発を始めたい場合はクラウド開発環境をお勧めします。ローカルに開発環境を作る場合と比べて、トラブルなく開発をはじめることができます。

- ブラウザだけで開発できるクラウド開発環境 - Cloud9
- ローカルに開発環境を作る - Macの場合
- ローカルに開発環境を作る - Windowsの場合

また、ブラウザはお好きなものをご利用いただけますが、途中のデバッグの箇所で [Chrome](https://www.google.co.jp/chrome/browser/) の機能を例にして説明していますので、Chromeを使うと分かり易いです。

### ブラウザだけで開発できるクラウド開発環境 - Cloud9

[Cloud9](https://c9.io) はブラウザだけでRailsアプリ開発を行うことができます。セットアップはCloud9へ会員登録を行うだけです。有料プランもありますが、本書の内容で開発を行う範囲では無料プランの範囲で利用することができます。マシンを変えても同じ環境で開発でき、ブラウザが使える環境であればどの端末からでも開発できるというメリットがあります。一方でネットに接続していないと開発できないことや、Cloud9がサービスをやめてしまうと継続して使えないというデメリットもあります。

利用には会員登録が必要です。会員登録後、ワークスペース（開発環境）を作成します。その際のテンプレートとしてはRails Tutorialを選ぶのがお勧めです。画面は3ペインのIDEになっていて、ファイルエクスプローラ、ファイルエディタ、ターミナルを利用することができます。ターミナルからはgitコマンドも利用できるので、githubでソース管理することも可能です。

2016年7月2日現在でCloud9に最初からインストールされているバージョンはRuby 2.3.0です。最初にrailsをインストールします。

```console
$ gem i rails
```

`rails -v`コマンドでインストールしたrailsのバージョンを確認します。

```console
$ rails -v
Rails 5.0.0
```

ローカルでの開発と違うのは、rails sコマンド（rails serverの略）と、そこへのアクセス方法です。rails sコマンドを実行する際は、以下のように-b, -pオプションを指定する必要があります。

```console
$ rails s -b $IP -p $PORT
```

また、起動したWebサーバへのアクセスは、ローカルに環境を作った場合と異なり、上部メニューにあるPreview - Preview Running Applicationからアクセスします。

以下はRubyのバージョンアップ方法です。少し難しい内容になりますので、はじめての方はここまでの内容で完了し、初期状態で利用する方が簡単です。cloud9ではRubyの管理にrvmを利用しているので、rvmでの通常の作法でバージョンアップ可能です。[^2]

```console
$ rvm get stable
$ rvm install 2.3.1
```

[^2]: これでうまくいかない場合はrvm公式サイト[https://rvm.io/rvm/upgrading](https://rvm.io/rvm/upgrading)に掲載されている方法(`\curl -sSL https://get.rvm.io | bash -s stable; rvm reload`)を試してからもう一度実行してみてください。

インストール後、Railsアプリのルートフォルダへ .ruby-versionファイルを作成し、`2.3.1` といった具合にRubyのバージョンを書くと、そのアプリではこのファイルで指定したバージョンを使用することができます。

Rubyを新規インストールした場合は、そのあとでrailsをインストールします。

### ローカルに開発環境を作る - Macの場合

自分のMac上に開発環境を作る方法です。

開発環境づくりに必要なxcodeツールをインストールします。

```console
$ xcode-select --install
```

homebrewをインストールします。homebrewはMacでさまざまな便利なものをインストール、管理するためのツールです。

```console
$ ruby -e "$(curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install)"
```

homebrewを使ってrbenvをインストールします。rbenvはRubyをインストールして管理するための道具です。

```console
$ brew update
$ brew install rbenv ruby-build
$ echo 'eval "$(rbenv init -)"' >> ~/.bash_profile
$ echo 'export PATH="$HOME/.rbenv/shims:$PATH"' >> ~/.bash_profile
$ source ~/.bash_profile
```

rbenvを使ってRubyをインストールします。

```console
$ rbenv install 2.3.1
```

installしたRubyを利用するように設定します。

```console
$ rbenv global 2.3.1
```

以上でRubyのインストールは完了です。続いて、インストールしたRubyを使ってRailsをインストールします。

```console
$ gem install rails
```

ここまででRubyとRailsの開発環境構築ができました。

プログラムを入力する道具であるエディタは、好みのものがあればそれを利用してください。特にない場合は [Atom](https://atom.io/) をお勧めします。Atomは無料で利用することができます（ライセンスはMITライセンスです）。

### ローカルに開発環境を作る - Windowsの場合

Windowsの場合は [RailsInstaller](http://railsinstaller.org) を利用することで環境を構築することができます。インストーラをダウンロードして実行してください。

ターミナルの起動はWindowsのアプリケーション選択から "Command Prompt with Ruby and Rails" を選んでください。通常のコマンドプロンプトを起動すると、環境変数の設定があわずにrailsコマンドやrubyコマンドを使えない場合があります。もしも想定通り動作しない場合、たとえばrailsコマンドを実行したときに「内部コマンドまたは外部コマンド、操作可能なプログラムまたはバッチファイルとして認識されていません」や「指定されたパスが見つかりません」と言われた場合は、上記のCloud9を利用することも検討してみてください[^3]。

[^3]: 2016年2月現在の最新パッケージは、Ruby 2.2.4, Rails 4.2という構成になっています。Railsはコマンドプロンプトから `gem update rails` コマンドで最新版にバージョンアップすることが可能です。しかし、Rubyのバージョンを上げるのは簡単ではないので、パッケージに入っているRubyをそのまま使うのが良いでしょう。最新バージョンのRubyおよびRailsを利用したい場合は、上記のCloud9の利用をお勧めします。

プログラムを入力する道具であるエディタは、好みのものがあればそれを利用してください。特にない場合は [Atom](https://github.com/atom/atom/blob/master/README.md#windows) をお勧めします。Atomは無料で利用することができます（ライセンスはMITライセンスです）。

---

それでは、次の章から早速Railsアプリづくりを始めましょう！
